{% extends 'base.template.html' %}

{% load crispy_forms_tags %}

{%block content %}

<div class = "main">
    
<form method="get">
    {{ filter.form | crispy }}
    <button type="submit">Search</button>
</form>

<div class="row">
    {% for event in filter.qs %}
        <div class="col-sm-4">
            <div class="card">
                <img src="{{event.image.url}}" class="card-img-top">
                <div class="card-body">
                    {% for t in event.tags.all %}
                    <h6>{{t.name}}</h6>
                    {%endfor%}
                    <h5 class="card-title">{{event.name}}</h5>
                    <p class="card-text">About Event: {{event.description}}</p>
                    <p class="card-text">Date: {{event.date}}</p>
                    <p class="card-text">Time: {{event.start_time}} to {{event.end_time}}</p>
                    <p class="card-text">Location: {{event.location}}</p>
                    <a href="{% url 'login' %}" class="btn btn-primary">Login to Register</a>
                </div>
            </div>
        </div>
    {%endfor%}
</div>

<div class="pagination">
    <span class="step-links">
        {% if all_events.has_previous %}
            &nbsp; <a href="?page=1">First</a>&nbsp; |
            &nbsp; <a href="?page={{ all_events.previous_page_number }}">Previous</a>&nbsp; 
        {% endif %}
    
        <span class="current">
            Page {{ all_events.number }} of {{ all_events.paginator.num_pages }}
        </span> {% if all_events.has_next %}
        &nbsp; <a href="?page={{ all_events.next_page_number }}">Next</a>&nbsp; |
        &nbsp; <a href="?page={{ all_events.paginator.num_pages }}">Last</a>&nbsp; {% endif %}
    </span>
</div>

</div>

{%endblock%}